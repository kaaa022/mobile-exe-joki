<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Snake Game Modern</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }

        body {
            height: 100vh;
            background: radial-gradient(circle at top, #1f2933, #0f172a);
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
        }

        .game-container {
            background: rgba(15, 23, 42, 0.9);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 0 40px rgba(0,255,255,0.25);
            text-align: center;
        }

        h1 {
            margin-bottom: 10px;
            letter-spacing: 2px;
            color: #22d3ee;
        }

        canvas {
            background: linear-gradient(#020617, #020617),
                        repeating-linear-gradient(
                            0deg,
                            #020617,
                            #020617 19px,
                            #020617 20px
                        ),
                        repeating-linear-gradient(
                            90deg,
                            #020617,
                            #020617 19px,
                            #020617 20px
                        );
            border-radius: 12px;
            box-shadow: inset 0 0 15px rgba(0,255,255,0.2);
        }

        .info {
            margin-top: 12px;
            font-size: 14px;
            color: #cbd5f5;
        }

        .overlay {
            position: absolute;
            inset: 0;
            background: rgba(2,6,23,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            border-radius: 20px;
        }

        .overlay h2 {
            font-size: 32px;
            margin-bottom: 10px;
            color: #22d3ee;
        }

        .overlay button {
            padding: 10px 25px;
            border: none;
            border-radius: 30px;
            background: #22d3ee;
            color: #020617;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        .overlay button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px #22d3ee;
        }

        .wrapper {
            position: relative;
        }
    </style>
</head>
<body>

<div class="game-container">
    <h1>üêç SNAKE GAME</h1>
    <div class="wrapper">
        <canvas id="game" width="400" height="400"></canvas>

        <div class="overlay" id="overlay">
            <h2 id="overlayText"></h2>
            <button onclick="restartGame()">Main Lagi</button>
        </div>
    </div>
    <div class="info">
        Skor: <span id="score">0</span> | Gunakan ‚¨Ü ‚¨á ‚¨Ö ‚û°
    </div>
</div>

<script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    const box = 20;
    const canvasSize = 20;

    let snake;
    let food;
    let direction;
    let score;
    let game;
    let isGameOver = false;

    function initGame() {
        snake = [{ x: 10, y: 10 }];
        food = randomFood();
        direction = "RIGHT";
        score = 0;
        isGameOver = false;
        document.getElementById("score").textContent = score;
        document.getElementById("overlay").style.display = "none";
        clearInterval(game);
        game = setInterval(draw, 120);
    }

    function randomFood() {
        return {
            x: Math.floor(Math.random() * canvasSize),
            y: Math.floor(Math.random() * canvasSize)
        };
    }

    document.addEventListener("keydown", (e) => {
        if (e.key === "ArrowUp" && direction !== "DOWN") direction = "UP";
        if (e.key === "ArrowDown" && direction !== "UP") direction = "DOWN";
        if (e.key === "ArrowLeft" && direction !== "RIGHT") direction = "LEFT";
        if (e.key === "ArrowRight" && direction !== "LEFT") direction = "RIGHT";
    });

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Food
        ctx.fillStyle = "#f43f5e";
        ctx.shadowColor = "#f43f5e";
        ctx.shadowBlur = 15;
        ctx.fillRect(food.x * box, food.y * box, box, box);
        ctx.shadowBlur = 0;

        // Snake
        snake.forEach((part, index) => {
            ctx.fillStyle = index === 0 ? "#22d3ee" : "#38bdf8";
            ctx.fillRect(part.x * box, part.y * box, box, box);
        });

        let head = { ...snake[0] };

        if (direction === "UP") head.y--;
        if (direction === "DOWN") head.y++;
        if (direction === "LEFT") head.x--;
        if (direction === "RIGHT") head.x++;

        // Kalah: nabrak tembok
        if (head.x < 0 || head.y < 0 || head.x >= canvasSize || head.y >= canvasSize) {
            endGame("KALAH üíÄ");
            return;
        }

        // Kalah: nabrak badan sendiri
        for (let part of snake) {
            if (head.x === part.x && head.y === part.y) {
                endGame("KALAH üíÄ");
                return;
            }
        }

        snake.unshift(head);

        // Makan food
        if (head.x === food.x && head.y === food.y) {
            score++;
            document.getElementById("score").textContent = score;
            food = randomFood();

            // MENANG
            if (score >= 15) {
                endGame("MENANG üèÜ");
                return;
            }
        } else {
            snake.pop();
        }
    }

    function endGame(text) {
        clearInterval(game);
        document.getElementById("overlayText").textContent = text;
        document.getElementById("overlay").style.display = "flex";
        isGameOver = true;
    }

    function restartGame() {
        initGame();
    }

    initGame();
</script>

</body>
</html>
