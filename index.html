<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Space Shooter</title>
<style>
    body {
        margin: 0;
        background: radial-gradient(circle at top, #020617, #000);
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        font-family: Arial, sans-serif;
        color: white;
    }

    .game-box {
        background: rgba(2,6,23,0.9);
        padding: 15px;
        border-radius: 16px;
        box-shadow: 0 0 40px rgba(0,255,255,0.3);
        text-align: center;
        position: relative;
    }

    h1 {
        margin-bottom: 8px;
        color: #22d3ee;
        letter-spacing: 2px;
    }

    canvas {
        background: linear-gradient(#020617, #020617);
        border-radius: 10px;
        box-shadow: inset 0 0 20px rgba(0,255,255,0.2);
    }

    .info {
        margin-top: 8px;
        font-size: 14px;
    }

    .overlay {
        position: absolute;
        inset: 0;
        background: rgba(0,0,0,0.85);
        display: none;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        border-radius: 16px;
    }

    .overlay h2 {
        font-size: 32px;
        margin-bottom: 12px;
        color: #22d3ee;
    }

    button {
        padding: 10px 25px;
        border: none;
        border-radius: 30px;
        background: #22d3ee;
        color: black;
        font-weight: bold;
        cursor: pointer;
        transition: 0.3s;
    }

    button:hover {
        transform: scale(1.1);
        box-shadow: 0 0 20px #22d3ee;
    }
</style>
</head>
<body>

<div class="game-box">
    <h1>üöÄ SPACE SHOOTER</h1>
    <canvas id="game" width="400" height="500"></canvas>

    <div class="overlay" id="overlay">
        <h2 id="resultText"></h2>
        <button onclick="restart()">Main Lagi</button>
    </div>

    <div class="info">
        Skor: <span id="score">0</span> |
        Nyawa: <span id="life">3</span><br>
        ‚¨Ö ‚û° untuk bergerak | Spasi untuk menembak
    </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let player, bullets, enemies, score, life;
let keys = {};
let gameInterval;

function startGame() {
    player = { x: 180, y: 440, w: 40, h: 40 };
    bullets = [];
    enemies = [];
    score = 0;
    life = 3;

    document.getElementById("score").textContent = score;
    document.getElementById("life").textContent = life;
    document.getElementById("overlay").style.display = "none";

    clearInterval(gameInterval);
    gameInterval = setInterval(update, 20);
}

document.addEventListener("keydown", e => keys[e.code] = true);
document.addEventListener("keyup", e => keys[e.code] = false);

function shoot() {
    bullets.push({ x: player.x + 18, y: player.y });
}

function spawnEnemy() {
    enemies.push({
        x: Math.random() * 360,
        y: -40,
        size: 30,
        speed: 2 + Math.random() * 2
    });
}

function update() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Player movement
    if (keys["ArrowLeft"] && player.x > 0) player.x -= 5;
    if (keys["ArrowRight"] && player.x < canvas.width - player.w) player.x += 5;
    if (keys["Space"]) {
        if (!keys.shootPressed) {
            shoot();
            keys.shootPressed = true;
        }
    } else {
        keys.shootPressed = false;
    }

    // Draw player
    ctx.fillStyle = "#22d3ee";
    ctx.fillRect(player.x, player.y, player.w, player.h);

    // Bullets
    ctx.fillStyle = "#facc15";
    bullets.forEach((b, i) => {
        b.y -= 7;
        ctx.fillRect(b.x, b.y, 4, 10);
        if (b.y < 0) bullets.splice(i, 1);
    });

    // Enemies
    if (Math.random() < 0.03) spawnEnemy();

    enemies.forEach((e, i) => {
        e.y += e.speed;
        ctx.fillStyle = "#f43f5e";
        ctx.fillRect(e.x, e.y, e.size, e.size);

        // Collision with player
        if (
            e.x < player.x + player.w &&
            e.x + e.size > player.x &&
            e.y < player.y + player.h &&
            e.y + e.size > player.y
        ) {
            enemies.splice(i, 1);
            life--;
            document.getElementById("life").textContent = life;
            if (life <= 0) endGame("KALAH üíÄ");
        }

        // Bullet collision
        bullets.forEach((b, bi) => {
            if (
                b.x < e.x + e.size &&
                b.x + 4 > e.x &&
                b.y < e.y + e.size &&
                b.y + 10 > e.y
            ) {
                enemies.splice(i, 1);
                bullets.splice(bi, 1);
                score++;
                document.getElementById("score").textContent = score;

                if (score >= 20) endGame("MENANG üèÜ");
            }
        });
    });
}

function endGame(text) {
    clearInterval(gameInterval);
    document.getElementById("resultText").textContent = text;
    document.getElementById("overlay").style.display = "flex";
}

function restart() {
    startGame();
}

startGame();
</script>

</body>
</html>
